关键机制
##############

IoA采用了多种关键机制，以实现多样化智能体之间的有效协作。这些机制协同工作，以促进智能体发现、团队形成、通信和任务执行。


🔍 智能体注册和发现
-----------------------------------
此机制允许智能体加入IoA生态系统并为特定任务找到合适的协作者。

* **智能体注册**: 当一个新智能体加入IoA时，它通过向服务器提供其能力、技能和专长的全面描述进行注册。这些信息存储在服务器数据层的智能体注册块中。

* **智能体发现**: 智能体可以使用服务器的智能体查询块提供的 :code:`search_client` 工具来搜索协作者。此工具利用智能体注册中的信息，根据所需的特征或能力匹配智能体。

🤝 自主嵌套团队形成
-----------------------------------
此机制支持动态和灵活的团队创建，使智能体能够为复杂任务形成层级结构的团队。

.. figure:: ../_static/nested-team-up.png
   :class: custom-img

* **团队形成过程**: 当分配到一个任务时，智能体使用 :code:`search_client` 和 :code:`launch_group_chat` 工具启动团队形成。它可以根据多方面任务的需要递归地形成子团队。

* **嵌套团队结构**: 这种层级方法减少了通信复杂性，并提高了协作效率，特别是对于需要多种技能的复杂任务。

🗣️ 自主对话流程控制
---------------------------------------
此机制管理智能体之间的通信流程，确保结构化和高效的对话。

.. image:: ../_static/work-flow.png
    :class: custom-img

* **顺序发言机制**: IoA采用基本的顺序发言方法，一次只允许一个智能体发言，以防止冲突并确保清晰的沟通。

* **有限状态机的群聊状态**: 对话流程被建模为一个有限状态机，包含讨论、任务分配和结论等状态。客户端中的大语言模型（LLMs）自动确定状态转换，以适应协作的需要。

📋 任务分配和执行
--------------------------------
此机制处理智能体网络内的任务分配和执行。

* **任务表示**: 任务表示为包含描述和一组潜在子任务的元组。

* **任务分配**: 任务可以同步分配（暂停群聊直到完成）或异步分配（允许并行执行）。

* **任务执行**: 负责的智能体执行分配的任务并向群聊汇报。暂停和触发状态确保在进入后续协作阶段之前提供所有必要信息。

这些机制协同工作，为IoA中的多智能体协作创造了一个灵活、高效和可扩展的环境。